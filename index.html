<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Questionário BDSM</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      padding: 1rem;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      transition: all 0.3s ease;
    }

    .dark {
      background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
      color: #ecf0f1;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    .section {
      background: rgba(255, 255, 255, 0.95);
      padding: 2rem;
      margin-bottom: 1.5rem;
      border-radius: 15px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.18);
      transition: all 0.3s ease;
    }

    .section:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
    }

    .dark .section {
      background: rgba(52, 73, 94, 0.95);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .section h2 {
      margin-bottom: 1.5rem;
      color: #2c3e50;
      font-size: 1.8rem;
      font-weight: 600;
      border-bottom: 3px solid #667eea;
      padding-bottom: 0.5rem;
    }

    .dark .section h2 {
      color: #ecf0f1;
      border-bottom-color: #3498db;
    }

    label {
      display: block;
      margin-bottom: 1rem;
      font-weight: 500;
      color: #34495e;
    }

    .dark label {
      color: #bdc3c7;
    }

    select, input[type="text"], textarea {
      width: 100%;
      padding: 0.8rem;
      margin-top: 0.5rem;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 1rem;
      transition: all 0.3s ease;
    }

    select:focus, input[type="text"]:focus, textarea:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .dark select, .dark input[type="text"], .dark textarea {
      background: #34495e;
      border-color: #7f8c8d;
      color: #ecf0f1;
    }

    .toggle-group {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-top: 1rem;
    }

    .toggle {
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      border: 2px solid #dee2e6;
      padding: 1rem;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 500;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .toggle:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .toggle.active {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-color: #667eea;
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
    }

    .dark .toggle {
      background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
      border-color: #7f8c8d;
      color: #ecf0f1;
    }

    .dark .toggle.active {
      background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
      border-color: #3498db;
    }

    .hidden {
      display: none;
    }

    .btn {
      margin-top: 1.5rem;
      padding: 1rem 2rem;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 1.1rem;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    }

    .btn-modo-escuro {
      margin-top: 0;
      padding: 0.6rem 1.2rem;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 0.9rem;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
    }

    .dark .btn-modo-escuro {
      background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
      box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.7rem;
      background: rgba(255, 255, 255, 0.9);
      padding: 0.35rem 0.525rem; /* Padding vertical reduzido 30%: de 0.525rem para 0.35rem, horizontal mantido */
      border-radius: 7px;
      box-shadow: 0 1.4px 7px rgba(0, 0, 0, 0.056);
    }

    .dark .top-bar {
      background: rgba(52, 73, 94, 0.9);
    }

    .creditos {
      font-size: 1.25rem; /* Aumentado 25% de 1rem para 1.25rem */
      font-weight: 600;
      color: #2c3e50;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .dark .creditos {
      background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    /* Estilos do questionário */
    .question-header {
      display: grid;
      grid-template-columns: 1fr 2fr 1fr;
      gap: 1rem;
      align-items: center;
      margin-bottom: 1rem;
      padding: 1rem;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 12px;
      border: 2px solid #e0e0e0;
    }

    .dark .question-header {
      background: rgba(52, 73, 94, 0.8);
      border-color: #7f8c8d;
    }

    .column-header {
      text-align: center;
      font-weight: 700;
      font-size: 1.3rem;
      padding: 0.8rem;
      border-radius: 8px;
    }

    .dar-header {
      background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
      color: white;
    }

    .receber-header {
      background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
      color: white;
    }

    .response-row {
      display: grid;
      grid-template-columns: 1fr 2fr 1fr;
      gap: 1rem;
      align-items: center;
      padding: 0.8rem;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 8px;
      border: 2px solid #e0e0e0;
      transition: all 0.3s ease;
      margin-bottom: 0.5rem;
    }

    .dark .response-row {
      background: rgba(52, 73, 94, 0.8);
      border-color: #7f8c8d;
    }

    /* Sistema de cores semáforo para as alternativas */
    .response-row[data-resposta="N/A"] {
      background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
      border-color: #95a5a6;
    }

    .response-row[data-resposta="Nunca experimentei"] {
      background: linear-gradient(135deg, #bdc3c7 0%, #95a5a6 100%);
      border-color: #bdc3c7;
    }

    .response-row[data-resposta="Adoro"] {
      background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
      border-color: #27ae60;
    }

    .response-row[data-resposta="Aproveito"] {
      background: linear-gradient(135deg, #58d68d 0%, #82e0aa 100%);
      border-color: #58d68d;
    }

    .response-row[data-resposta="Aceito"] {
      background: linear-gradient(135deg, #f7dc6f 0%, #f4d03f 100%);
      border-color: #f7dc6f;
    }

    .response-row[data-resposta="Tolero"] {
      background: linear-gradient(135deg, #e67e22 0%, #d35400 100%);
      border-color: #e67e22;
    }

    .response-row[data-resposta="Limite rígido"] {
      background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
      border-color: #e74c3c;
    }

    /* Cores para modo escuro */
    .dark .response-row[data-resposta="N/A"] {
      background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
      border-color: #95a5a6;
    }

    .dark .response-row[data-resposta="Nunca experimentei"] {
      background: linear-gradient(135deg, #bdc3c7 0%, #95a5a6 100%);
      border-color: #bdc3c7;
    }

    .dark .response-row[data-resposta="Adoro"] {
      background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
      border-color: #27ae60;
    }

    .dark .response-row[data-resposta="Aproveito"] {
      background: linear-gradient(135deg, #58d68d 0%, #82e0aa 100%);
      border-color: #58d68d;
    }

    .dark .response-row[data-resposta="Aceito"] {
      background: linear-gradient(135deg, #f7dc6f 0%, #f4d03f 100%);
      border-color: #f7dc6f;
    }

    .dark .response-row[data-resposta="Tolero"] {
      background: linear-gradient(135deg, #e67e22 0%, #d35400 100%);
      border-color: #e67e22;
    }

    .dark .response-row[data-resposta="Limite rígido"] {
      background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
      border-color: #e74c3c;
    }

    .response-text {
      text-align: center;
      font-weight: 600;
      color: #2c3e50;
    }

    .dark .response-text {
      color: #ecf0f1;
    }

    .response-switch {
      position: relative;
      display: flex;
      justify-content: center;
    }

    .switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 25px;
    }

    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: 0.4s;
      border-radius: 34px;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 19px;
      width: 19px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      transition: 0.4s;
      border-radius: 50%;
    }

    input:checked + .slider {
      background-color: #667eea;
    }

    input:checked + .slider:before {
      transform: translateX(22px);
    }

    .dark input:checked + .slider {
      background-color: #3498db;
    }

    .progress-container {
      margin: 2rem 0;
      background: rgba(255, 255, 255, 0.9);
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .dark .progress-container {
      background: rgba(52, 73, 94, 0.9);
    }

    .progress-text {
      text-align: center;
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 1rem;
      color: #2c3e50;
    }

    .dark .progress-text {
      color: #ecf0f1;
    }

    .progress {
      height: 15px;
      background: #e0e0e0;
      border-radius: 10px;
      overflow: hidden;
    }

    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
      border-radius: 10px;
      transition: width 0.5s ease;
      width: 0%;
    }

    .dark .progress-bar {
      background: linear-gradient(90deg, #3498db 0%, #2980b9 100%);
    }

    .navigation-buttons {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-top: 2rem;
    }

    .nav-btn {
      padding: 1rem 2rem;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .btn-anterior {
      background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
      color: white;
    }

    .btn-anterior:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(149, 165, 166, 0.4);
    }

    .btn-proximo {
      background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
      color: white;
    }

    .btn-proximo:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(39, 174, 96, 0.4);
    }

    /* Estilos dos resultados */
    .estatisticas-gerais {
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      padding: 2rem;
      margin-bottom: 2rem;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      text-align: center;
    }

    .dark .estatisticas-gerais {
      background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-top: 1rem;
    }

    .stat-card {
      background: white;
      padding: 1rem;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .dark .stat-card {
      background: #2c3e50;
    }

    .stat-number {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }

    .stat-label {
      font-size: 0.9rem;
      opacity: 0.8;
    }

    .compartilhar-container {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 2rem;
      margin-bottom: 2rem;
      border-radius: 15px;
      text-align: center;
      color: white;
    }

    .dark .compartilhar-container {
      background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
    }

    .btn-compartilhar {
      background: rgba(255, 255, 255, 0.2);
      border: 2px solid white;
      color: white;
      padding: 1rem 2rem;
      border-radius: 10px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      margin: 0.5rem;
    }

    .btn-compartilhar:hover {
      background: white;
      color: #667eea;
      transform: translateY(-2px);
    }

    .dark .btn-compartilhar:hover {
      color: #3498db;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .dark table {
      background: #34495e;
    }

    th, td {
      border: 1px solid #e0e0e0;
      padding: 0.8rem;
      text-align: center;
    }

    .dark th, .dark td {
      border-color: #7f8c8d;
    }

    th {
      background: transparent;
      color: #2c3e50;
      font-weight: 600;
      border-bottom: 2px solid #e0e0e0;
    }

    .dark th {
      background: transparent;
      color: #ecf0f1;
      border-bottom: 2px solid #7f8c8d;
    }

    .resultado-categoria h3 {
      background: linear-gradient(90deg, #27ae60 0%, #f1c40f 50%, #e74c3c 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-size: 1.8rem; /* Aumentado de 1.5rem para 1.8rem (+20%) */
      font-weight: 700;
      margin: 2rem 0 1rem 0;
    }

    /* Cores do semáforo para células da tabela nos resultados */
    td[data-resposta="Nunca experimentei"] {
      background: linear-gradient(135deg, #bdc3c7 0%, #95a5a6 100%) !important;
      color: white;
      font-weight: 600;
    }

    td[data-resposta="Adoro"] {
      background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%) !important;
      color: white;
      font-weight: 600;
    }

    td[data-resposta="Aproveito"] {
      background: linear-gradient(135deg, #58d68d 0%, #82e0aa 100%) !important;
      color: white;
      font-weight: 600;
    }

    td[data-resposta="Aceito"] {
      background: linear-gradient(135deg, #f7dc6f 0%, #f4d03f 100%) !important;
      color: #2c3e50;
      font-weight: 600;
    }

    td[data-resposta="Tolero"] {
      background: linear-gradient(135deg, #e67e22 0%, #d35400 100%) !important;
      color: white;
      font-weight: 600;
    }

    td[data-resposta="Limite rígido"] {
      background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%) !important;
      color: white;
      font-weight: 600;
    }

    /* Estilos para o resumo do perfil selecionado */
    .resumo-perfil-selecionado {
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      padding: 2rem;
      margin-bottom: 2rem;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .dark .resumo-perfil-selecionado {
      background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
    }

    .resumo-perfil-selecionado h3 {
      text-align: center;
      margin-bottom: 1.5rem;
      color: #2c3e50;
      font-size: 1.8rem;
      font-weight: 700;
    }

    .dark .resumo-perfil-selecionado h3 {
      color: #ecf0f1;
    }

    .resumo-perfil-selecionado h4 {
      margin: 1.5rem 0 1rem 0;
      color: #667eea;
      font-size: 1.2rem;
      font-weight: 600;
      border-left: 4px solid #667eea;
      padding-left: 1rem;
    }

    .dark .resumo-perfil-selecionado h4 {
      color: #3498db;
      border-left-color: #3498db;
    }

    .perfil-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .perfil-card {
      background: white;
      padding: 1.5rem;
      border-radius: 12px;
      text-align: center;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease;
    }

    .perfil-card:hover {
      transform: translateY(-2px);
    }

    .dark .perfil-card {
      background: #2c3e50;
    }

    .perfil-icon {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .perfil-label {
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 0.5rem;
      font-weight: 500;
    }

    .dark .perfil-label {
      color: #bdc3c7;
    }

    .perfil-valor {
      font-size: 1.1rem;
      font-weight: 700;
      color: #2c3e50;
    }

    .dark .perfil-valor {
      color: #ecf0f1;
    }

    .tags-container {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1.5rem;
    }

    .tag {
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: 600;
      color: white;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .tag-relacionamento {
      background: linear-gradient(135deg, #e91e63 0%, #c2185b 100%);
    }

    .tag-local {
      background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
    }

    .tag-categoria {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .dark .tag-relacionamento {
      background: linear-gradient(135deg, #e91e63 0%, #ad1457 100%);
    }

    .dark .tag-local {
      background: linear-gradient(135deg, #ff9800 0%, #e65100 100%);
    }

    .dark .tag-categoria {
      background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
    }
    .dark td[data-resposta="Nunca experimentei"] {
      background: linear-gradient(135deg, #bdc3c7 0%, #95a5a6 100%) !important;
      color: white;
    }

    .dark td[data-resposta="Adoro"] {
      background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%) !important;
      color: white;
    }

    .dark td[data-resposta="Aproveito"] {
      background: linear-gradient(135deg, #58d68d 0%, #82e0aa 100%) !important;
      color: white;
    }

    .dark td[data-resposta="Aceito"] {
      background: linear-gradient(135deg, #f7dc6f 0%, #f4d03f 100%) !important;
      color: #2c3e50;
    }

    .dark td[data-resposta="Tolero"] {
      background: linear-gradient(135deg, #e67e22 0%, #d35400 100%) !important;
      color: white;
    }

    .dark td[data-resposta="Limite rígido"] {
      background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%) !important;
      color: white;
    }

    .modo-visualizacao {
      background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
      color: white;
      padding: 1rem;
      margin-bottom: 2rem;
      border-radius: 15px;
      text-align: center;
      font-weight: 600;
    }

    .dark .modo-visualizacao {
      background: linear-gradient(135deg, #e67e22 0%, #d35400 100%);
    }

    @media (max-width: 768px) {
      .toggle-group {
        grid-template-columns: 1fr;
      }
      
      .navigation-buttons {
        flex-direction: column;
      }
      
      .question-header, .response-row {
        grid-template-columns: 1fr 2fr 1fr;
        text-align: center;
        gap: 0.5rem;
      }

      .question-header {
        padding: 0.8rem 0.5rem;
      }

      .column-header {
        font-size: 0.9rem;
        padding: 0.6rem 0.3rem;
      }

      .response-row {
        padding: 0.8rem 0.5rem;
        margin-bottom: 0.5rem;
      }

      .response-text {
        font-size: 0.9rem;
        font-weight: 600;
        padding: 0.5rem;
      }

      .response-switch {
        display: flex;
        justify-content: center;
      }

      .switch {
        width: 45px;
        height: 23px;
      }

      .slider:before {
        height: 17px;
        width: 17px;
        left: 3px;
        bottom: 3px;
      }

      input:checked + .slider:before {
        transform: translateX(19px);
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="top-bar">
      <div class="creditos">Desenvolvido por HerrKrieg e Jakehimura</div>
      <button onclick="document.body.classList.toggle('dark')" class="btn-modo-escuro">🌙 Modo Claro/Escuro</button>
    </div>

    <div class="section">
      <h2>👤 Quem é você?</h2>
      <label>Posição que se identifica:
        <select id="posicao">
          <option>Top</option>
          <option>Switch</option>
          <option>bottom</option>
          <option>Sádico</option>
          <option>Masoquista</option>
          <option>Fetichista</option>
          <option>Outros</option>
        </select>
      </label>
      <label>Tolerância à dor:
        <select id="dor">
          <option>Muito Baixa</option>
          <option>Baixa</option>
          <option>Média</option>
          <option>Alta</option>
          <option>Muito Alta</option>
          <option>N/A</option>
        </select>
      </label>
      <label>Nível de experiência teórica:
        <select id="teorica">
          <option>0-3 anos</option>
          <option>3-5 anos</option>
          <option>5-7 anos</option>
          <option>7-10 anos</option>
          <option>10+ anos</option>
        </select>
      </label>
      <label>Nível de experiência prática:
        <select id="pratica">
          <option>0-3 anos</option>
          <option>3-5 anos</option>
          <option>5-7 anos</option>
          <option>7-10 anos</option>
          <option>10+ anos</option>
        </select>
      </label>
    </div>

    <div class="section">
      <h2>💕 Tipo de Relacionamento</h2>
      <div class="toggle-group">
        <button class="toggle">Sessões Avulsas</button>
        <button class="toggle">Monogamia</button>
        <button class="toggle">Não-monogamia</button>
        <button class="toggle">Cuckolding</button>
        <button class="toggle">Múltiplos parceiros</button>
        <button class="toggle">Swing (troca de casais)</button>
        <button class="toggle">Poliamor</button>
        <button class="toggle">Troca de poder (TPE)</button>
        <button class="toggle">Troca Erótica de Poder (EPE)</button>
        <button class="toggle">Troca Parcial de Poder (PPE)</button>
        <button class="toggle">Disponibilidade 24/7</button>
      </div>
    </div>

    <div class="section">
      <h2>📍 Locais</h2>
      <div class="toggle-group">
        <button class="toggle">Privado</button>
        <button class="toggle">Público (exibição controlada)</button>
        <button class="toggle">Clubes/Meetings</button>
      </div>
    </div>

    <div class="section">
      <h2>📋 Subcategorias</h2>
      <div class="toggle-group">
        <button class="toggle" data-subcategoria="true">Atos sexuais</button>
        <button class="toggle" data-subcategoria="true">Bondage</button>
        <button class="toggle" data-subcategoria="true">Sadismo e Masoquismo</button>
        <button class="toggle" data-subcategoria="true">Dominação e Submissão</button>
        <button class="toggle" data-subcategoria="true">Role Play</button>
        <button class="toggle" data-subcategoria="true">Fetiches</button>
        <button class="toggle" data-subcategoria="true">Equipamentos</button>
      </div>
      <button class="btn" onclick="iniciarQuestionario()">🚀 Iniciar Questionário</button>
    </div>

    <div id="questionario" class="section hidden">
      <h2 id="categoriaAtual"></h2>
      <div id="perguntaAtual" style="font-size: 1.3rem; font-weight: 600; margin-bottom: 1rem; color: #2c3e50; text-align: center;"></div>
      
      <div class="question-header">
        <div class="column-header dar-header">🔥 DAR</div>
        <div></div>
        <div class="column-header receber-header">💖 RECEBER</div>
      </div>
      
      <div id="questionResponses">
        <!-- Respostas serão inseridas aqui dinamicamente -->
      </div>

      <div class="progress-container">
        <div class="progress-text" id="progressText">Pergunta 1 de 1</div>
        <div class="progress">
          <div class="progress-bar" id="progressBar"></div>
        </div>
      </div>

      <div class="navigation-buttons">
        <button class="nav-btn btn-anterior" onclick="anteriorPergunta()">⬅️ Anterior</button>
      </div>
    </div>

    <div id="resultados" class="section hidden">
      <h2>📊 Resultados</h2>
      <div id="resumo"></div>
    </div>
  </div>

  <script>
    // Mapeamento das classificações específicas por categoria
    const classificacoesPorCategoria = {
      'Atos sexuais': {
        tipo1: 'RECEBER',
        tipo2: 'FAZER'
      },
      'Bondage': {
        tipo1: 'SER PRESO(A)',
        tipo2: 'PRENDER'
      },
      'Sadismo e Masoquismo': {
        tipo1: 'DAR',
        tipo2: 'RECEBER'
      },
      'Dominação e Submissão': {
        tipo1: 'MANDAR',
        tipo2: 'OBEDECER'
      },
      'Role Play': {
        tipo1: 'AUTOR',
        tipo2: 'VÍTIMA'
      },
      'Fetiches': {
        tipo1: 'FAZER',
        tipo2: 'ASSISTIR'
      },
      'Equipamentos': {
        tipo1: 'APLICAR',
        tipo2: 'RECEBER'
      }
    };

    // Configuração das perguntas
    const perguntas = {
      "Atos sexuais": [
        "Sexo Vaginal", "Sexo Anal", "Sexo oral", "Sexo nos seios",
        "Masturbação sem penetração dos dedos", "Masturbação com penetração dos dedos",
        "Fisting vaginal", "Fisting Anal", "Beijo", "Beijo de língua", "Lambidas", "Rimming / Lambedura Anal",
        "Brinquedos vaginais", "Brinquedos anais", "Provocações sexuais", "Massagem",
        "Acariciar / acariciar o cabelo", "Fluidos Corporais - Saliva", "Fluidos Corporais - Suor",
        "Fluidos Corporais - Urina", "Fluidos Corporais - Esperma", "Fluidos Corporais - Lubrificação Feminina",
        "Fluidos Corporais - No corpo", "Fluidos Corporais - No rosto", "Fluidos Corporais - Na boca",
        "Fluidos Corporais - Ingerir", "Dupla Penetração", "Dupla Penetração Vaginal",
        "Dupla Penetração - Brinquedos", "Dupla Penetração Vaginal - Brinquedos",
        "Penetração Tripla - Humana", "Penetração Tripla - Brinquedos", "Menáge - MFF", "Menáge - FMF",
        "Menáge - FMM", "Menáge - MFM", "Menáge - Todos do mesmo sexo", "Gang Bang"
      ],
      "Bondage": [
        "Corpo todo", "Mental", "Restrição de movimentos 0-1 hora", "Restrição de movimentos 1-3 horas",
        "Restrição de movimentos 3-12 horas", "Equipamentos restritivos de couro", "Equipamentos restritivos Metálicos",
        "Amarrações", "Amarrações complexas / Shibari", "Suspensão - Vertical", "Suspensão - Horizontal",
        "Suspensão - Invertida", "Restrição Genital", "Mumificação", "Contenção (Celas / Gaiolas/ Jaulas)",
        "Posições desconfortáveis", "Gags", "Privação sensorial", "Dispositivos de castidade"
      ],
      "Sadismo e Masoquismo": [
        "Palmada", "Tapa na cara", "Morder", "Tortura de mamilo", "Tortura Genital",
        "Socos / Espancamentos", "Hematomas", "Coçar", "Puxões de cabelo", "Beliscar", "Asfixia - Traqueia",
        "Asfixia - Arterial", "Controle de respiração", "Tortura de Água", "Sufocar sentando no rosto", "Ser pisado",
        "Fogo", "Bastinado (tortura de pés)", "Abrasão", "Ventosaterapia / Sucção", "Agulhas", "Perfuração",
        "Facas (sem corte)", "Corte", "Choque", "Frio/Quente", "Velas/Cera Quente", "Cócegas", "Luta livre",
        "Humilhação (privado)", "Humilhação pública", "Dilatação - Vaginal", "Dilatação - Anal", "Abuso Verbal",
        "Marcas permanentes", "Cell Popping / Micro Branding", "Injeções", "Escarificação", "Tatuagem", "Enemas",
        "Brincadeira uretral", "Engasgos (dedos ou objetos)", "Engasgos durante oral"
      ],
      "Dominação e Submissão": [
        "Implorar", "Tarefas domésticas", "Ser mandado", "Protocolo de postura/posição corporal",
        "Restrição de Comportamento", "Restrição de contato visual", "Restrição/protocolo de fala",
        "Controle de uso do banheiro", "Rastejar", "Exercício Forçado", "Masturbação Forçada", "Orgasmos Forçados",
        "Roupas escolhidas", "Nudez Forçada", "Comida escolhida", "Coleira e Guia", "Conversa Suja", "Sermão", "Hipnose",
        "Lustrar botas", "Em Público", "Em Público de forma discreta", "Controle / Negação do Orgasmo",
        "Resistência/Insurgência", "Adoração de Pés / Pernas", "Adoração Genital", "Competição", "Diário / blog",
        "Controle de peso corporal", "Servir como Móvel", "Servir como Arte", "Servir como cinzeiro",
        "Servir como banheiro", "Bissexualidade forçada", "Acessório simbólico", "Condições de sono", "Motorista"
      ],
      "Role Play": [
        "Chefe/Secretária", "Professor/Estudante", "Donzela em perigo", "Sequestro",
        "Médico - Enfermeiro / Paciente", "Diferença de idade (Ageplay)", "Interrogatório", "Regressão etária",
        "Bebê adulto", "Cenas de prisão", "Servindo como empregada doméstica", "Prostituição / Doado",
        "Iniciação / Ritual", "Cenas de punição", "Cenas Religiosas", "Cenas de estupro", "Petplay - Cachorro",
        "Petplay - Gato", "Petplay - Cavalo", "Furries", "Cosplay", "Boneca viva", "Cenas de corno",
        "Cenas de leilão", "Reprodução / Impregnação"
      ],
      "Fetiches": [
        "Couro", "Látex", "Borracha", "PVC", "Lingerie", "Sapatos", "Botas", "Luvas", "Pés", "Mãos",
        "Fixação Oral", "Fumar", "Uniformes", "Voyeurismo", "Espartilhos", "Médico", "Crossdressing",
        "Feminização Forçada", "Strap-On", "Lolita", "Pessoas mais velhas", "Pelagem animal", "Lactação",
        "Brincadeira de comida", "Menstruação", "Fotos/Vídeos", "Exibicionismo Online", "Exibicionismo Real",
        "Medo / Ameaça", "Chorando", "Abandono", "Acrotomofilia", "Barosmia", "Barbear", "Shibari", "Dança Erótica",
        "Piercings", "Tatuagens", "Modificação corporal", "Musculação", "Bukkake", "Zentai", "Fraldas",
        "Chuva Dourada", "Sangue", "Vomitar", "Scat"
      ],
      "Equipamentos": [
        "Cintos/tiras de couro", "Corda de cânhamo", "Correntes", "Coleiras", "Coleiras de Postura", "Punhos de couro",
        "Algemas", "Algemas Metálicas", "Meia calça", "Barras espaçadoras", "Cadeados", "Vendas", "Capuzes",
        "Máscaras", "Protetores auriculares", "Máscaras de gás", "Camas a vácuo", "Harness", "Plástico Filme",
        "Gesso", "Braçadeira única", "Luvas de Ópera Bondage", "Anéis penianos", "Balanço sexual", "Trelas de cavalo",
        "Jaquetas de bondage", "Gaiolas", "Gags de bola", "Gags de pano", "Gags de fita", "Gags de pênis",
        "Gags de boca aberta", "Gags infláveis", "Gags vibrador", "Gags de focinheira", "Trelas de nariz",
        "Ganchos de nariz", "Prendedores de roupa", "Bengalas", "Remos", "Chicotes", "Chicotes de 9 caudas",
        "Chicote de Dragão", "Club medieval", "Varinhas Violetas", "Eletro Estimulação", "Grampos para Mamilos",
        "Pesos para mamilos", "Pinças para lábios", "Pesos Genitais", "Esmagadores nas bolas", "Gancho Anal",
        "Gancho Vaginal", "Vibradores - Inseríveis", "Vibradores - Varinhas", "Plugues anais", "Plugues com cauda",
        "Bolinhas tailandesas", "Espéculos", "Sonda uretral", "Cata-ventos", "Sinos", "Strap-on", "Penas", "Facas",
        "Garras", "Espelhos", "Máquinas sexuais"
      ]
    };

    const respostas = [
      "N/A", "Nunca experimentei", "Adoro", "Aproveito", "Aceito", "Tolero", "Limite rígido"
    ];

    // Variáveis globais
    let listaPerguntas = [];
    let indice = 0;
    let respostasUsuario = [];
    let respostaDarAtual = null;
    let respostaReceberAtual = null;
    let voltouPergunta = false;

    // Configuração dos botões toggle
    document.addEventListener('DOMContentLoaded', function() {
      const botoesToggle = document.querySelectorAll('.toggle');
      botoesToggle.forEach(btn => {
        btn.addEventListener('click', () => btn.classList.toggle('active'));
      });
    });

    function iniciarQuestionario() {
      const selecionadas = Array.from(document.querySelectorAll('[data-subcategoria].active')).map(btn => btn.textContent);
      
      if (selecionadas.length === 0) {
        alert('Por favor, selecione pelo menos uma subcategoria!');
        return;
      }
      
      listaPerguntas = [];
      respostasUsuario = [];
      indice = 0;
      voltouPergunta = false;
      
      selecionadas.forEach(cat => {
        if (perguntas[cat]) {
          perguntas[cat].forEach(p => listaPerguntas.push({ categoria: cat, texto: p }));
        }
      });
      
      document.getElementById('questionario').classList.remove('hidden');
      document.getElementById('resultados').classList.add('hidden');
      mostrarPergunta();
    }

    // Função para atualizar os cabeçalhos no questionário
    function atualizarCabecalhosQuestionario() {
      const categoriaAtual = listaPerguntas[indice]?.categoria;
      const classificacao = classificacoesPorCategoria[categoriaAtual];
      
      if (classificacao) {
        const darHeader = document.querySelector('.dar-header');
        const receberHeader = document.querySelector('.receber-header');
        
        if (darHeader && receberHeader) {
          // Definir ícones
          const iconesTipo1 = {
            'RECEBER': '💖',
            'SER PRESO(A)': '🔒',
            'DAR': '🔥',
            'MANDAR': '👑',
            'AUTOR': '🎭',
            'FAZER': '🔥',
            'APLICAR': '🔧'
          };
          
          const iconesTipo2 = {
            'FAZER': '🔥',
            'PRENDER': '⛓️',
            'RECEBER': '💖',
            'OBEDECER': '🙇',
            'VÍTIMA': '🎪',
            'ASSISTIR': '👀'
          };
          
          const iconeTipo1 = iconesTipo1[classificacao.tipo1] || '🔥';
          const iconeTipo2 = iconesTipo2[classificacao.tipo2] || '💖';
          
          darHeader.innerHTML = `${iconeTipo1} ${classificacao.tipo1}`;
          receberHeader.innerHTML = `${iconeTipo2} ${classificacao.tipo2}`;
        }
      }
    }

    function mostrarPergunta() {
      if (indice < 0 || indice >= listaPerguntas.length) return;
      
      const atual = listaPerguntas[indice];
      document.getElementById('categoriaAtual').textContent = `📋 ${atual.categoria}`;
      document.getElementById('perguntaAtual').textContent = atual.texto;

      // Limpar seleções anteriores
      respostaDarAtual = null;
      respostaReceberAtual = null;
      
      // Restaurar respostas se existirem
      if (respostasUsuario[indice]) {
        respostaDarAtual = respostasUsuario[indice].dar;
        respostaReceberAtual = respostasUsuario[indice].receber;
      }

      // Atualizar cabeçalhos com as classificações corretas
      atualizarCabecalhosQuestionario();
      
      criarRespostas();
      atualizarProgresso();
      verificarBotaoProximo();
    }

    function criarRespostas() {
      const container = document.getElementById('questionResponses');
      container.innerHTML = '';
      
      // Obter classificação atual para labels mobile
      const categoriaAtual = listaPerguntas[indice]?.categoria;
      const classificacao = classificacoesPorCategoria[categoriaAtual];
      
      respostas.forEach(resposta => {
        const responseRow = document.createElement('div');
        responseRow.className = 'response-row';
        responseRow.setAttribute('data-resposta', resposta);
        
        // Switch DAR
        const darSwitch = document.createElement('div');
        darSwitch.className = 'response-switch';
        darSwitch.setAttribute('data-label', classificacao ? classificacao.tipo1 : 'DAR');
        darSwitch.innerHTML = `
          <label class="switch">
            <input type="checkbox" id="dar-${resposta.replace(/\s+/g, '-').toLowerCase()}-${indice}">
            <span class="slider"></span>
          </label>
        `;
        
        // Texto da resposta
        const responseText = document.createElement('div');
        responseText.className = 'response-text';
        responseText.textContent = resposta;
        
        // Switch RECEBER
        const receberSwitch = document.createElement('div');
        receberSwitch.className = 'response-switch';
        receberSwitch.setAttribute('data-label', classificacao ? classificacao.tipo2 : 'RECEBER');
        receberSwitch.innerHTML = `
          <label class="switch">
            <input type="checkbox" id="receber-${resposta.replace(/\s+/g, '-').toLowerCase()}-${indice}">
            <span class="slider"></span>
          </label>
        `;
        
        // Event listeners
        const darInput = darSwitch.querySelector('input');
        const receberInput = receberSwitch.querySelector('input');
        
        darInput.addEventListener('change', function() {
          if (this.checked) {
            // Desmarcar outros toggles DAR
            container.querySelectorAll('.response-switch:first-child input').forEach(cb => {
              if (cb !== this) cb.checked = false;
            });
            respostaDarAtual = resposta;
          } else {
            respostaDarAtual = null;
          }
          verificarBotaoProximo();
        });
        
        receberInput.addEventListener('change', function() {
          if (this.checked) {
            // Desmarcar outros toggles RECEBER
            container.querySelectorAll('.response-switch:last-child input').forEach(cb => {
              if (cb !== this) cb.checked = false;
            });
            respostaReceberAtual = resposta;
          } else {
            respostaReceberAtual = null;
          }
          verificarBotaoProximo();
        });
        
        // Marcar como selecionado se for a resposta atual
        if (respostaDarAtual === resposta) {
          darInput.checked = true;
        }
        if (respostaReceberAtual === resposta) {
          receberInput.checked = true;
        }
        
        // Montar a linha
        responseRow.appendChild(darSwitch);
        responseRow.appendChild(responseText);
        responseRow.appendChild(receberSwitch);
        
        container.appendChild(responseRow);
      });
    }

    function verificarBotaoProximo() {
      const btnProximo = document.querySelector('.btn-proximo');
      
      if (respostaDarAtual && respostaReceberAtual) {
        if (voltouPergunta) {
          // Se voltou, mostra botão próximo
          if (!btnProximo) {
            const navButtons = document.querySelector('.navigation-buttons');
            const novoBtn = document.createElement('button');
            novoBtn.className = 'nav-btn btn-proximo';
            novoBtn.textContent = '➡️ Próximo';
            novoBtn.onclick = proximaPergunta;
            navButtons.appendChild(novoBtn);
          }
        } else {
          // Uso normal = auto-avanço
          setTimeout(() => {
            proximaPergunta();
          }, 500);
        }
      } else {
        if (btnProximo) {
          btnProximo.remove();
        }
      }
    }

    function proximaPergunta() {
      if (!respostaDarAtual || !respostaReceberAtual) {
        return;
      }
      
      voltouPergunta = false;
      const btnProximo = document.querySelector('.btn-proximo');
      if (btnProximo) {
        btnProximo.remove();
      }
      
      const atual = listaPerguntas[indice];
      respostasUsuario[indice] = {
        categoria: atual.categoria,
        pergunta: atual.texto,
        dar: respostaDarAtual,
        receber: respostaReceberAtual
      };
      
      indice++;
      
      if (indice < listaPerguntas.length) {
        mostrarPergunta();
      } else {
        mostrarResultado();
      }
    }

    function anteriorPergunta() {
      if (indice > 0) {
        indice--;
        voltouPergunta = true;
        mostrarPergunta();
      }
    }

    function atualizarProgresso() {
      const progressText = document.getElementById('progressText');
      const progressBar = document.getElementById('progressBar');
      
      const atual = indice + 1;
      const total = listaPerguntas.length;
      
      progressText.textContent = `Pergunta ${atual} de ${total}`;
      
      const porcentagem = (indice / listaPerguntas.length) * 100;
      progressBar.style.width = porcentagem + '%';
    }

    function mostrarResultado() {
      document.getElementById('questionario').classList.add('hidden');
      document.getElementById('resultados').classList.remove('hidden');

      const resumo = document.getElementById('resumo');
      resumo.innerHTML = '';
      
      const agrupado = {};

      // Filtrar respostas N/A
      const respostasFiltradas = respostasUsuario.filter(r => 
        r.dar !== 'N/A' || r.receber !== 'N/A'
      );

      respostasFiltradas.forEach(r => {
        if (!agrupado[r.categoria]) {
          agrupado[r.categoria] = {
            tipo1: {},
            tipo2: {}
          };
        }
        
        // Agrupar respostas TIPO1 (antigo DAR)
        if (r.dar !== 'N/A') {
          if (!agrupado[r.categoria].tipo1[r.dar]) {
            agrupado[r.categoria].tipo1[r.dar] = [];
          }
          agrupado[r.categoria].tipo1[r.dar].push(r.pergunta);
        }
        
        // Agrupar respostas TIPO2 (antigo RECEBER)
        if (r.receber !== 'N/A') {
          if (!agrupado[r.categoria].tipo2[r.receber]) {
            agrupado[r.categoria].tipo2[r.receber] = [];
          }
          agrupado[r.categoria].tipo2[r.receber].push(r.pergunta);
        }
      });

      // Adicionar resumo do perfil
      adicionarResumoPerfilSelecionado(resumo);

      // Adicionar estatísticas gerais
      adicionarEstatisticasGerais(resumo, respostasFiltradas);

      // Adicionar botão de compartilhamento
      adicionarBotaoCompartilhar(resumo);

      for (const categoria in agrupado) {
        const secao = document.createElement('div');
        secao.className = 'resultado-categoria';
        secao.innerHTML = `<h3>📋 ${categoria}</h3>`;
        
        // Obter os rótulos corretos para esta categoria
        const classificacao = classificacoesPorCategoria[categoria];
        
        if (classificacao) {
          // Criar tabela para TIPO1
          const tabelaTipo1 = criarTabelaResultado(
            agrupado[categoria].tipo1, 
            classificacao.tipo1,
            categoria
          );
          secao.appendChild(tabelaTipo1);
          
          // Criar tabela para TIPO2  
          const tabelaTipo2 = criarTabelaResultado(
            agrupado[categoria].tipo2, 
            classificacao.tipo2,
            categoria
          );
          secao.appendChild(tabelaTipo2);
        } else {
          console.error(`Classificação não encontrada para categoria: ${categoria}`);
        }
        
        resumo.appendChild(secao);
      }
    }

    function adicionarResumoPerfilSelecionado(container) {
      // Coletar dados selecionados
      const perfilSelecionado = {
        posicao: document.getElementById('posicao').value,
        dor: document.getElementById('dor').value,
        teorica: document.getElementById('teorica').value,
        pratica: document.getElementById('pratica').value
      };

      // Coletar relacionamentos selecionados
      const relacionamentosSelecionados = Array.from(
        document.querySelectorAll('.section:nth-child(3) .toggle.active')
      ).map(btn => btn.textContent);

      // Coletar locais selecionados
      const locaisSelecionados = Array.from(
        document.querySelectorAll('.section:nth-child(4) .toggle.active')
      ).map(btn => btn.textContent);

      // Coletar categorias respondidas
      const categoriasRespondidas = [...new Set(respostasUsuario.map(r => r.categoria))];

      const resumoDiv = document.createElement('div');
      resumoDiv.className = 'resumo-perfil-selecionado';
      
      resumoDiv.innerHTML = `
        <h3>👤 Seu Perfil</h3>
        <div class="perfil-grid">
          <div class="perfil-card">
            <div class="perfil-icon">🎯</div>
            <div class="perfil-label">Posição</div>
            <div class="perfil-valor">${perfilSelecionado.posicao}</div>
          </div>
          <div class="perfil-card">
            <div class="perfil-icon">⚡</div>
            <div class="perfil-label">Tolerância à Dor</div>
            <div class="perfil-valor">${perfilSelecionado.dor}</div>
          </div>
          <div class="perfil-card">
            <div class="perfil-icon">📚</div>
            <div class="perfil-label">Experiência Teórica</div>
            <div class="perfil-valor">${perfilSelecionado.teorica}</div>
          </div>
          <div class="perfil-card">
            <div class="perfil-icon">🔥</div>
            <div class="perfil-label">Experiência Prática</div>
            <div class="perfil-valor">${perfilSelecionado.pratica}</div>
          </div>
        </div>

        ${relacionamentosSelecionados.length > 0 ? `
        <h4>💕 Tipos de Relacionamento</h4>
        <div class="tags-container">
          ${relacionamentosSelecionados.map(rel => `<span class="tag tag-relacionamento">${rel}</span>`).join('')}
        </div>
        ` : ''}

        ${locaisSelecionados.length > 0 ? `
        <h4>📍 Locais de Interesse</h4>
        <div class="tags-container">
          ${locaisSelecionados.map(local => `<span class="tag tag-local">${local}</span>`).join('')}
        </div>
        ` : ''}

        <h4>📋 Categorias Respondidas</h4>
        <div class="tags-container">
          ${categoriasRespondidas.map(cat => `<span class="tag tag-categoria">${cat}</span>`).join('')}
        </div>
      `;
      
      container.appendChild(resumoDiv);
    }

    function criarTabelaResultado(dados, titulo, categoria) {
      const container = document.createElement('div');
      
      // Definir cores baseadas na categoria e tipo
      const coresHeader = {
        'RECEBER': '#e74c3c',
        'FAZER': '#27ae60', 
        'SER PRESO(A)': '#e74c3c',
        'PRENDER': '#27ae60',
        'DAR': '#e74c3c',
        'MANDAR': '#e74c3c', 
        'OBEDECER': '#27ae60',
        'AUTOR': '#e74c3c',
        'VÍTIMA': '#27ae60',
        'APLICAR': '#e74c3c',
        'ASSISTIR': '#27ae60'
      };

      // Definir ícones baseados no tipo
      const icones = {
        'RECEBER': '💖',
        'FAZER': '🔥',
        'SER PRESO(A)': '🔒',
        'PRENDER': '⛓️',
        'DAR': '🔥',
        'MANDAR': '👑',
        'OBEDECER': '🙇',
        'AUTOR': '🎭',
        'VÍTIMA': '🎪',
        'APLICAR': '🔧',
        'ASSISTIR': '👀'
      };
      
      const cor = coresHeader[titulo] || '#667eea';
      const icone = icones[titulo] || '📋';
      
      container.innerHTML = `
        <h4 style="
          margin: 1.5rem 0 1rem 0; 
          color: ${cor};
          font-size: 1.2rem;
          font-weight: 700;
          text-align: center;
          padding: 0.8rem;
          background: linear-gradient(135deg, ${cor}15 0%, ${cor}05 100%);
          border-radius: 10px;
          border-left: 4px solid ${cor};
        ">
          ${icone} ${titulo}
        </h4>
      `;
      
      const tabela = document.createElement('table');
      tabela.style.marginBottom = '1.5rem';
      
      const headerRow = document.createElement('tr');

      // Filtrar respostas para excluir N/A
      const respostasVisiveis = respostas.filter(r => r !== 'N/A');

      respostasVisiveis.forEach(res => {
          const th = document.createElement('th');
          th.textContent = res;
          headerRow.appendChild(th);
      });

      tabela.appendChild(headerRow);

      // Encontrar o máximo de itens por coluna
      const maxLinhas = Math.max(...respostasVisiveis.map(r => (dados[r] || []).length));

      for (let i = 0; i < maxLinhas; i++) {
          const row = document.createElement('tr');
          respostasVisiveis.forEach(res => {
              const td = document.createElement('td');
              const conteudo = dados[res]?.[i] || "";
              td.textContent = conteudo;
              
              // Aplicar cores do semáforo se houver conteúdo
              if (conteudo) {
                td.setAttribute('data-resposta', res);
              }
              
              // Adicionar alternância de cores nas linhas (apenas para células vazias)
              if (i % 2 === 0 && !conteudo) {
                  td.style.backgroundColor = 'rgba(255, 255, 255, 0.05)';
              }
              
              row.appendChild(td);
          });
          tabela.appendChild(row);
      }

      container.appendChild(tabela);
      return container;
    }

    function adicionarEstatisticasGerais(container, respostasFiltradas) {
      const stats = calcularEstatisticas(respostasFiltradas);
      
      const estatisticas = document.createElement('div');
      estatisticas.className = 'estatisticas-gerais';
      
      estatisticas.innerHTML = `
        <h3>📊 Resumo dos Seus Resultados</h3>
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-number" style="color: #27ae60;">${stats.totalAdoro}</div>
            <div class="stat-label">Práticas que você ADORA</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" style="color: #f39c12;">${stats.totalAceito}</div>
            <div class="stat-label">Práticas que você ACEITA</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" style="color: #e74c3c;">${stats.totalLimites}</div>
            <div class="stat-label">Limites Rígidos</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" style="color: #95a5a6;">${stats.totalNunca}</div>
            <div class="stat-label">Nunca Experimentou</div>
          </div>
        </div>
      `;
      
      container.appendChild(estatisticas);
    }

    function adicionarBotaoCompartilhar(container) {
      const compartilhar = document.createElement('div');
      compartilhar.className = 'compartilhar-container';
      
      compartilhar.innerHTML = `
        <h3>🔗 Compartilhar Resultados</h3>
        <p>Gere um link único para compartilhar seus resultados com outras pessoas</p>
        <button class="btn-compartilhar" onclick="copiarLinkCompartilhamento()">
          📋 Copiar Link de Compartilhamento
        </button>
        <div id="linkGerado" style="display: none; margin-top: 1rem; padding: 1rem; background: rgba(255,255,255,0.1); border-radius: 8px;">
          <strong>🔗 Link gerado:</strong><br>
          <span id="linkTexto" style="font-family: monospace; word-break: break-all; font-size: 0.9rem;"></span>
        </div>
      `;
      
      container.appendChild(compartilhar);
    }

    function calcularEstatisticas(respostas) {
      const stats = {
        totalAdoro: 0,
        totalAceito: 0,
        totalLimites: 0,
        totalNunca: 0
      };
      
      respostas.forEach(r => {
        [r.dar, r.receber].forEach(resposta => {
          if (resposta === 'Adoro' || resposta === 'Aproveito') stats.totalAdoro++;
          else if (resposta === 'Aceito' || resposta === 'Tolero') stats.totalAceito++;
          else if (resposta === 'Limite rígido') stats.totalLimites++;
          else if (resposta === 'Nunca experimentei') stats.totalNunca++;
        });
      });
      
      return stats;
    }

    // Sistema de compartilhamento otimizado
    function copiarLinkCompartilhamento() {
      const botao = event.target;
      const textoOriginal = botao.textContent;
      
      try {
        // Criar dados comprimidos
        const dadosComprimidos = comprimirRespostas();
        
        // Gerar link
        const urlAtual = window.location.href.split('#')[0];
        const link = `${urlAtual}#r=${dadosComprimidos}`;
        
        // Copiar para clipboard
        navigator.clipboard.writeText(link).then(() => {
          botao.textContent = '✅ Link Copiado!';
          botao.style.background = '#27ae60';
          
          // Mostrar link gerado
          const linkDiv = document.getElementById('linkGerado');
          const linkTexto = document.getElementById('linkTexto');
          linkTexto.textContent = link;
          linkDiv.style.display = 'block';
          
          setTimeout(() => {
            botao.textContent = textoOriginal;
            botao.style.background = '';
          }, 3000);
        }).catch(() => {
          // Fallback para navegadores mais antigos
          const input = document.createElement('input');
          input.value = link;
          document.body.appendChild(input);
          input.select();
          document.execCommand('copy');
          document.body.removeChild(input);
          
          botao.textContent = '✅ Link Copiado!';
          botao.style.background = '#27ae60';
          
          // Mostrar link gerado
          const linkDiv = document.getElementById('linkGerado');
          const linkTexto = document.getElementById('linkTexto');
          linkTexto.textContent = link;
          linkDiv.style.display = 'block';
          
          setTimeout(() => {
            botao.textContent = textoOriginal;
            botao.style.background = '';
          }, 3000);
        });
        
      } catch (error) {
        console.error('Erro ao gerar link:', error);
        botao.textContent = '❌ Erro';
        botao.style.background = '#e74c3c';
        
        setTimeout(() => {
          botao.textContent = textoOriginal;
          botao.style.background = '';
        }, 3000);
      }
    }

    function comprimirRespostas() {
      const respostasMap = ['N/A', 'Nunca experimentei', 'Adoro', 'Aproveito', 'Aceito', 'Tolero', 'Limite rígido'];
      const categoriasMap = ['Atos sexuais', 'Bondage', 'Sadismo e Masoquismo', 'Dominação e Submissão', 'Role Play', 'Fetiches', 'Equipamentos'];
      
      // Comprimir respostas
      const respostasComprimidas = respostasUsuario.map(r => {
        const catIndex = categoriasMap.indexOf(r.categoria);
        const pergIndex = perguntas[r.categoria].indexOf(r.pergunta);
        const darIndex = respostasMap.indexOf(r.dar);
        const receberIndex = respostasMap.indexOf(r.receber);
        
        // Verificar se todos os índices são válidos
        if (catIndex === -1 || pergIndex === -1 || darIndex === -1 || receberIndex === -1) {
          console.warn('Erro ao comprimir resposta:', r);
          return null;
        }
        
        return `${catIndex}:${pergIndex}:${darIndex}:${receberIndex}`;
      }).filter(item => item !== null).join('|');
      
      // Comprimir perfil
      const posicoes = ['Top', 'Switch', 'bottom', 'Sádico', 'Masoquista', 'Fetichista', 'Outros'];
      const dores = ['Muito Baixa', 'Baixa', 'Média', 'Alta', 'Muito Alta', 'N/A'];
      const experiencias = ['0-3 anos', '3-5 anos', '5-7 anos', '7-10 anos', '10+ anos'];
      
      const perfilComprimido = [
        posicoes.indexOf(document.getElementById('posicao').value),
        dores.indexOf(document.getElementById('dor').value),
        experiencias.indexOf(document.getElementById('teorica').value),
        experiencias.indexOf(document.getElementById('pratica').value)
      ].join(',');
      
      const dadosFinais = `${respostasComprimidas}#${perfilComprimido}`;
      return btoa(dadosFinais);
    }

    // Verificar resultado compartilhado ao carregar a página
    function verificarResultadoCompartilhado() {
      const hash = window.location.hash;
      
      if (hash.startsWith('#r=')) {
        try {
          const dadosBase64 = hash.substring(3);
          const dadosComprimidos = atob(dadosBase64);
          const dados = descomprimirDados(dadosComprimidos);
          
          if (dados.respostas.length === 0) {
            mostrarMensagemErro();
            return false;
          }
          
          processarResultadoCompartilhado(dados);
          return true;
        } catch (error) {
          console.error('Erro ao carregar resultado compartilhado:', error);
          mostrarMensagemErro();
          return false;
        }
      }
      
      return false;
    }

    function descomprimirDados(dadosComprimidos) {
      const [respostasStr, perfilStr] = dadosComprimidos.split('#');
      
      const respostasMap = ['N/A', 'Nunca experimentei', 'Adoro', 'Aproveito', 'Aceito', 'Tolero', 'Limite rígido'];
      const categoriasMap = ['Atos sexuais', 'Bondage', 'Sadismo e Masoquismo', 'Dominação e Submissão', 'Role Play', 'Fetiches', 'Equipamentos'];
      
      const respostas = respostasStr.split('|').map(item => {
        const [catIndex, pergIndex, darIndex, receberIndex] = item.split(':').map(x => parseInt(x));
        const categoria = categoriasMap[catIndex];
        
        // Verificar se a categoria e pergunta existem
        if (!categoria || !perguntas[categoria] || !perguntas[categoria][pergIndex]) {
          console.warn(`Pergunta não encontrada: categoria ${catIndex}, pergunta ${pergIndex}`);
          return null;
        }
        
        return {
          categoria: categoria,
          pergunta: perguntas[categoria][pergIndex],
          dar: respostasMap[darIndex] || 'N/A',
          receber: respostasMap[receberIndex] || 'N/A'
        };
      }).filter(item => item !== null); // Filtrar itens inválidos
      
      const perfilIndices = perfilStr.split(',').map(x => parseInt(x));
      const posicoes = ['Top', 'Switch', 'bottom', 'Sádico', 'Masoquista', 'Fetichista', 'Outros'];
      const dores = ['Muito Baixa', 'Baixa', 'Média', 'Alta', 'Muito Alta', 'N/A'];
      const experiencias = ['0-3 anos', '3-5 anos', '5-7 anos', '7-10 anos', '10+ anos'];
      
      return {
        respostas: respostas,
        perfil: {
          posicao: posicoes[perfilIndices[0]] || 'Top',
          dor: dores[perfilIndices[1]] || 'Média',
          teorica: experiencias[perfilIndices[2]] || '0-3 anos',
          pratica: experiencias[perfilIndices[3]] || '0-3 anos'
        },
        timestamp: new Date().toISOString()
      };
    }

    function processarResultadoCompartilhado(dados) {
      // Carregar dados compartilhados
      respostasUsuario = dados.respostas || [];
      
      // Mostrar aviso de visualização
      mostrarModoVisualizacao(dados);
      
      // Mostrar resultados
      document.getElementById('questionario').classList.add('hidden');
      document.getElementById('resultados').classList.remove('hidden');
      mostrarResultadoCompartilhado(dados);
    }

    function mostrarModoVisualizacao(dados) {
      const container = document.querySelector('.container');
      const aviso = document.createElement('div');
      aviso.className = 'modo-visualizacao';
      
      const dataFormatada = new Date(dados.timestamp).toLocaleDateString('pt-BR');
      
      aviso.innerHTML = `
        👁️ <strong>Modo Visualização</strong> - Você está visualizando resultados compartilhados
        <br>
        <small>Perfil: ${dados.perfil?.posicao || 'N/A'} | Data: ${dataFormatada}</small>
        <br>
        <button onclick="window.location.hash=''; location.reload();" style="margin-top: 0.5rem; padding: 0.5rem 1rem; background: white; color: #e67e22; border: none; border-radius: 5px; cursor: pointer;">
          🏠 Fazer Meu Próprio Teste
        </button>
      `;
      
      container.insertBefore(aviso, container.firstChild);
    }

    function mostrarResultadoCompartilhado(dados) {
      const resumo = document.getElementById('resumo');
      resumo.innerHTML = '';
      
      const agrupado = {};
      const respostasFiltradas = dados.respostas.filter(r => 
        r.dar !== 'N/A' || r.receber !== 'N/A'
      );

      respostasFiltradas.forEach(r => {
        if (!agrupado[r.categoria]) {
          agrupado[r.categoria] = { tipo1: {}, tipo2: {} };
        }
        
        if (r.dar !== 'N/A') {
          if (!agrupado[r.categoria].tipo1[r.dar]) {
            agrupado[r.categoria].tipo1[r.dar] = [];
          }
          agrupado[r.categoria].tipo1[r.dar].push(r.pergunta);
        }
        
        if (r.receber !== 'N/A') {
          if (!agrupado[r.categoria].tipo2[r.receber]) {
            agrupado[r.categoria].tipo2[r.receber] = [];
          }
          agrupado[r.categoria].tipo2[r.receber].push(r.pergunta);
        }
      });

      // Adicionar estatísticas
      adicionarEstatisticasGerais(resumo, respostasFiltradas);

      // Mostrar perfil compartilhado
      if (dados.perfil) {
        const perfilDiv = document.createElement('div');
        perfilDiv.className = 'estatisticas-gerais';
        perfilDiv.innerHTML = `
          <h3>👤 Perfil</h3>
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-label">Posição</div>
              <div style="font-weight: 600;">${dados.perfil.posicao}</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Tolerância à Dor</div>
              <div style="font-weight: 600;">${dados.perfil.dor}</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Experiência Teórica</div>
              <div style="font-weight: 600;">${dados.perfil.teorica}</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Experiência Prática</div>
              <div style="font-weight: 600;">${dados.perfil.pratica}</div>
            </div>
          </div>
        `;
        resumo.appendChild(perfilDiv);
      }

      // Adicionar resultados por categoria
      for (const categoria in agrupado) {
        const secao = document.createElement('div');
        secao.className = 'resultado-categoria';
        secao.innerHTML = `<h3>📋 ${categoria}</h3>`;
        
        const classificacao = classificacoesPorCategoria[categoria];
        
        if (classificacao) {
          const tabelaTipo1 = criarTabelaResultado(agrupado[categoria].tipo1, classificacao.tipo1, categoria);
          secao.appendChild(tabelaTipo1);
          
          const tabelaTipo2 = criarTabelaResultado(agrupado[categoria].tipo2, classificacao.tipo2, categoria);
          secao.appendChild(tabelaTipo2);
        }
        
        resumo.appendChild(secao);
      }
    }

    function mostrarMensagemErro() {
      const container = document.querySelector('.container');
      const aviso = document.createElement('div');
      aviso.className = 'modo-visualizacao';
      aviso.style.background = 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)';
      
      aviso.innerHTML = `
        ❌ <strong>Link Inválido</strong> - Este resultado não pode ser carregado
        <br>
        <small>O link pode estar corrompido ou incompleto</small>
        <br>
        <button onclick="window.location.hash=''; location.reload();" style="margin-top: 0.5rem; padding: 0.5rem 1rem; background: white; color: #e74c3c; border: none; border-radius: 5px; cursor: pointer;">
          🏠 Fazer Meu Próprio Teste
        </button>
      `;
      
      container.insertBefore(aviso, container.firstChild);
    }

    // Verificar resultado compartilhado ao carregar a página
    window.addEventListener('load', function() {
      verificarResultadoCompartilhado();
    });
  </script>
</body>
</html>
